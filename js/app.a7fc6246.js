(function(e){function t(t){for(var n,o,s=t[0],l=t[1],u=t[2],p=0,f=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,s=1;s<r.length;s++){var l=r[s];0!==a[l]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=l;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},1224:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"hello":"Photo batch","chooselang":"Choose lang","helper.tooltip.draggable":"Drag to change the order of actions","helper.tooltip.uploadfile.placeholder":"Choose a file or drop it here...","helper.tooltip.uploadfile.dropplaceholder":"Drop file here...","helper.tooltip.uploadfile.description":"Press button or drop files here for upload. Scalable images will be rasterized","button.addeventhandler":"Add filter","button.event.download":"Download","preview.button.viewselector.originalview":"Source image","preview.button.viewselector.resultview":"Result image","filter.contrast.name":"Contrast","filter.resize.name":"Resize","filter.convert.name":"Convert","filter.grayscale.name":"Grayscale","filter.opacity.name":"Opacity","filter.saturate.name":"Saturate","filter.blur.name":"Blur","filter.overlay.name":"Overlay","filter.crop.name":"Crop","helper.tooltip.uploadfile.browsebutton":"Browse"},"ru":{"hello":"Фото обработчик","chooselang":"Выбрать язык","helper.tooltip.draggable":"Зажмите и перетаскивайте для изменения порядка действий","helper.tooltip.uploadfile.placeholder":"Загрузить изображения","helper.tooltip.uploadfile.dropplaceholder":"Загрузить сюда...","helper.tooltip.uploadfile.description":"Нажмите или перенесите изображения сюда для их загрузки. Векторные svg изображения будут растеризованы","button.addeventhandler":"Добавить фильтр","button.event.download":"Скачать результат","preview.button.viewselector.originalview":"Исходное изображение","preview.button.viewselector.resultview":"Конечное изображение","filter.contrast.name":"Контраст","filter.resize.name":"Размер","filter.convert.name":"Формат","filter.grayscale.name":"Обесцвечивание","filter.opacity.name":"Прозрачность","filter.saturate.name":"Насыщенность","filter.blur.name":"Размытие","filter.overlay.name":"Наложение","filter.crop.name":"Кадрирование","helper.tooltip.uploadfile.browsebutton":"Загрузка"}}'),delete e.options._Ctor}},"22b9":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"hello":"Photo batch","chooselang":"Choose lang","helper.tooltip.draggable":"Drag to change the order of actions","helper.tooltip.uploadfile.placeholder":"Choose a file or drop it here...","helper.tooltip.uploadfile.dropplaceholder":"Drop file here...","helper.tooltip.uploadfile.description":"Press button or drop files here for upload. Scalable images will be rasterized","button.addeventhandler":"Add filter","button.event.download":"Download","preview.button.viewselector.originalview":"Source image","preview.button.viewselector.resultview":"Result image","filter.contrast.name":"Contrast","filter.resize.name":"Resize","filter.convert.name":"Convert","filter.grayscale.name":"Grayscale","filter.opacity.name":"Opacity","filter.saturate.name":"Saturate","filter.blur.name":"Blur","filter.overlay.name":"Overlay","filter.crop.name":"Crop","helper.tooltip.uploadfile.browsebutton":"Browse"},"ru":{"hello":"Фото обработчик","chooselang":"Выбрать язык","helper.tooltip.draggable":"Зажмите и перетаскивайте для изменения порядка действий","helper.tooltip.uploadfile.placeholder":"Загрузить изображения","helper.tooltip.uploadfile.dropplaceholder":"Загрузить сюда...","helper.tooltip.uploadfile.description":"Нажмите или перенесите изображения сюда для их загрузки. Векторные svg изображения будут растеризованы","button.addeventhandler":"Добавить фильтр","button.event.download":"Скачать результат","preview.button.viewselector.originalview":"Исходное изображение","preview.button.viewselector.resultview":"Конечное изображение","filter.contrast.name":"Контраст","filter.resize.name":"Размер","filter.convert.name":"Формат","filter.grayscale.name":"Обесцвечивание","filter.opacity.name":"Прозрачность","filter.saturate.name":"Насыщенность","filter.blur.name":"Размытие","filter.overlay.name":"Наложение","filter.crop.name":"Кадрирование","helper.tooltip.uploadfile.browsebutton":"Загрузка"}}'),delete e.options._Ctor}},"4f4b":function(e,t,r){"use strict";var n=r("a2c9"),a=r.n(n);t["default"]=a.a},"5f32":function(e,t,r){"use strict";r("a648")},a2c9:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"en":{"hello":"Photo batch","chooselang":"Choose lang","helper.tooltip.draggable":"Drag to change the order of actions","helper.tooltip.uploadfile.placeholder":"Choose a file or drop it here...","helper.tooltip.uploadfile.dropplaceholder":"Drop file here...","helper.tooltip.uploadfile.description":"Press button or drop files here for upload. Scalable images will be rasterized","button.addeventhandler":"Add filter","button.event.download":"Download","preview.button.viewselector.originalview":"Source image","preview.button.viewselector.resultview":"Result image","filter.contrast.name":"Contrast","filter.resize.name":"Resize","filter.convert.name":"Convert","filter.grayscale.name":"Grayscale","filter.opacity.name":"Opacity","filter.saturate.name":"Saturate","filter.blur.name":"Blur","filter.overlay.name":"Overlay","filter.crop.name":"Crop","helper.tooltip.uploadfile.browsebutton":"Browse"},"ru":{"hello":"Фото обработчик","chooselang":"Выбрать язык","helper.tooltip.draggable":"Зажмите и перетаскивайте для изменения порядка действий","helper.tooltip.uploadfile.placeholder":"Загрузить изображения","helper.tooltip.uploadfile.dropplaceholder":"Загрузить сюда...","helper.tooltip.uploadfile.description":"Нажмите или перенесите изображения сюда для их загрузки. Векторные svg изображения будут растеризованы","button.addeventhandler":"Добавить фильтр","button.event.download":"Скачать результат","preview.button.viewselector.originalview":"Исходное изображение","preview.button.viewselector.resultview":"Конечное изображение","filter.contrast.name":"Контраст","filter.resize.name":"Размер","filter.convert.name":"Формат","filter.grayscale.name":"Обесцвечивание","filter.opacity.name":"Прозрачность","filter.saturate.name":"Насыщенность","filter.blur.name":"Размытие","filter.overlay.name":"Наложение","filter.crop.name":"Кадрирование","helper.tooltip.uploadfile.browsebutton":"Загрузка"}}'),delete e.options._Ctor}},a648:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("d81d"),r("a434"),r("b0c0"),r("d3b7"),r("3ca3"),r("ddb0"),r("96cf");var n=r("1da1"),a=(r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("f9e3"),r("2dd8"),r("2b0e")),i=r("2f62"),o=r("5f5b"),s=r("b1e0"),l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("b-container",{staticClass:"vh-100 p-0 d-flex flex-column",attrs:{fluid:""}},[r("b-row",{attrs:{"no-gutters":""}},[r("b-col",[r("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"info"}},[r("b-navbar-brand",{attrs:{href:"#"}},[e._v("ImageBatch "+e._s(e.$t("hello"))+" (version 0.0.1 - alpha)")]),r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-nav-item-dropdown",{attrs:{text:e.$t("chooselang"),right:""}},e._l(e.supportLangs,(function(t){return r("b-dropdown-item",{key:t,staticClass:"text-uppercase",on:{click:function(r){return e.$store.commit("setlang",t)}}},[e._v(e._s(t))])})),1)],1)],1)],1)],1)],1),r("b-row",{staticClass:"flex-grow-1 overflow-hidden",attrs:{"align-v":"stretch","no-gutters":""}},[r("b-col",{staticClass:"mh-100",attrs:{md:"3"}},[r("append-file")],1),r("b-col",{staticClass:"mh-100",attrs:{md:"6"}},[r("preview-canvas")],1),r("b-col",{staticClass:"mh-100",attrs:{md:"3"}},[r("div",{staticClass:"d-flex flex-column mh-100"},[r("b-dropdown",{staticClass:"m-2",attrs:{block:"",text:e.$t("button.addeventhandler")}},e._l(e.registeredFilters,(function(t){return r("b-dropdown-item",{key:t,on:{click:function(r){return e.initFilter(t)}}},[e._v(e._s(e.$t("filter."+t+".name")))])})),1),r("draggable",{staticClass:"list-group overflow-auto",attrs:{tag:"div",list:e.filterMaps,handle:".handle"}},e._l(e.filterMaps,(function(t,n){return r("b-card",{key:n,attrs:{"no-body":""}},[r("b-card-header",{staticClass:"handle",attrs:{"header-tag":"header","header-bg-variant":"gradient-dark",title:e.$t("helper.tooltip.draggable")}},[r("b-row",{staticClass:"flex-nowrap",attrs:{"align-v":"center"}},[r("b-col",{attrs:{cols:"3"}},[r("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"m-1 p-1",attrs:{size:"sm",title:e.$t("helper.tooltip.draggable")}},[e._v(e._s(n+1)+" ")])],1),r("b-col",{attrs:{cols:"6"}},[e._v(e._s(e.$t("filter."+t.name+".name")))]),r("b-col",{attrs:{cols:"3"}},[r("b-button",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:function(t){return e.$store.commit("removeFilter",n)}}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])],1)],1)],1),r("b-card-body",[r(t.name.charAt(0).toUpperCase()+t.name.slice(1)+"Filter",{tag:"component",attrs:{settings:t}})],1)],1)})),1),r("b-dropdown",{staticClass:"m-2",attrs:{block:"",text:e.$t("button.event.download")}},[r("b-dropdown-item",{on:{click:function(t){return e.$store.dispatch("downloadImages")}}},[e._v("Скачать все файлы")]),r("b-dropdown-item",{on:{click:function(t){return e.$store.dispatch("downloadImages","zip")}}},[e._v("Скачать как ZIP")])],1)],1)])],1)],1)],1)},u=[],c=(r("b64b"),r("5530")),p=r("b76a"),f=r.n(p),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"preview h-100 d-flex flex-column border border-left border-right"},[r("b-form-group",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.ariaDescribedby;return[r("b-form-radio-group",{attrs:{id:"btn-radios-1",options:e.options,"aria-describedby":n,name:"radios-btn-default",buttons:""},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})]}}])}),e._v(" Size: "+e._s(e.width)+" x "+e._s(e.height)+" px "),r("b-overlay",{staticClass:"d-flex flex-grow-1 align-items-center justify-content-center overflow-auto p-1",attrs:{show:e.showProcessIndicator}},[r("canvas",{ref:"canvas",staticClass:"mw-100 mh-100",attrs:{id:"canvas",width:e.width,height:e.height}})])],1)},h=[],b=a["default"].extend({data:function(){return{selected:"result-preview",width:0,height:0,updateTimeout:0,showProcessIndicator:!1}},computed:{options:function(){return[{value:"original-preview",text:this.$t("preview.button.viewselector.originalview")},{value:"result-preview",text:this.$t("preview.button.viewselector.resultview")}]}},methods:{updateCanvas:function(){var e,t=this,r=this.$refs.canvas;null!==this.$store.state.showFileIndex?(this.showProcessIndicator=!0,window.clearTimeout(this.updateTimeout),this.updateTimeout=window.setTimeout(Object(n["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("runFilterProcessorForOne",{index:t.$store.state.showFileIndex,ignoreFilter:"original-preview"===t.selected});case 2:a=e.sent,null===(n=r.getContext("2d"))||void 0===n||n.clearRect(0,0,r.width,r.height),t.width=a.width,t.height=a.height,t.$nextTick((function(){var e;return null===(e=r.getContext("2d"))||void 0===e?void 0:e.drawImage(a,0,0)})),t.showProcessIndicator=!1;case 8:case"end":return e.stop()}}),e)}))),200)):null===(e=r.getContext("2d"))||void 0===e||e.clearRect(0,0,r.width,r.height)}},watch:{"$store.state.filterMaps":{handler:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateCanvas();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deep:!0},"$store.state.showFileIndex":function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateCanvas();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),selected:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.updateCanvas();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}}),m=b,g=(r("5f32"),r("2877")),v=r("e1ed"),w=Object(g["a"])(m,d,h,!1,null,null,null);"function"===typeof v["default"]&&Object(v["default"])(w);var O=w.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{staticClass:"mh-100 d-flex flex-column",on:{submit:function(e){e.stopPropagation(),e.preventDefault()}}},[r("b-form-file",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],ref:"form-file",staticClass:"text-left",attrs:{placeholder:e.$t("helper.tooltip.uploadfile.placeholder"),"drop-placeholder":e.$t("helper.tooltip.uploadfile.dropplaceholder"),accept:"image/*",multiple:"",title:e.$t("helper.tooltip.uploadfile.description"),"browse-text":e.$t("helper.tooltip.uploadfile.browsebutton")},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}}),r("b-list-group",{staticClass:"overflow-auto"},e._l(e.globalFileList,(function(t,n){return r("b-list-group-item",{key:n,staticClass:"d-flex justify-content-between align-items-center p-1",attrs:{active:e.$store.state.showFileIndex===n},on:{click:function(t){return e.$store.commit("showFile",n)}}},[e._v(e._s(n+1)+" - "+e._s(t.name)+" "),r("b-button",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:function(t){return t.stopPropagation(),e.$store.commit("deleteFile",n)}}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])],1)})),1)],1)},_=[],T=(r("4160"),r("159b"),a["default"].extend({data:function(){return{fileList:[]}},watch:{fileList:function(e){var t=this;e.forEach((function(e){return t.$store.commit("setFile",e)})),this.$refs["form-file"].reset()}},computed:{globalFileList:function(){return this.$store.state.fileList}}})),y=T,k=r("ecae"),j=Object(g["a"])(y,x,_,!1,null,null,null);"function"===typeof k["default"]&&Object(k["default"])(j);var C=j.exports,E=a["default"].extend({name:"App",components:{draggable:f.a,previewCanvas:O,appendFile:C},methods:Object(c["a"])({},Object(i["b"])(["initFilter"])),computed:Object(c["a"])(Object(c["a"])({},Object(i["c"])(["registeredFilters"])),{},{filterMaps:{get:function(){return this.$store.state.filterMaps},set:function(){this.$store.dispatch("setFilter")}},supportLangs:function(){return Object.keys(this.$i18n.messages)}}),data:function(){return{filters:[],handlers:[{name:"test",component:"component"}]}}}),R=E,F=r("4f4b"),I=Object(g["a"])(R,l,u,!1,null,null,null);"function"===typeof F["default"]&&Object(F["default"])(I);var M=I.exports,$=r("a925"),P=r("b85c"),L=r("d4ec"),D=r("bee2");r("2b3d");function N(e){return z.apply(this,arguments)}function z(){return z=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=URL.createObjectURL(t),n=new Image,n.src=r,e.next=5,n.decode();case 5:if(a=n.width,i=n.height,o=new OffscreenCanvas(a,i),s=o.getContext("2d"),null!==s){e.next=11;break}throw new Error("unable to create canvas context");case 11:return s.drawImage(n,0,0),URL.revokeObjectURL(r),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}r("7db0");var B,S=function(){function e(){Object(L["a"])(this,e),this.filterCollection=[]}return Object(D["a"])(e,[{key:"registerFilter",value:function(e){this.filterCollection.push(e)}},{key:"findFilter",value:function(e){var t;return null!==(t=this.filterCollection.find((function(t){return e===(new t).name})))&&void 0!==t?t:null}},{key:"getFilterCollection",value:function(){return this.filterCollection}},{key:"createInstance",value:function(e){var t=this.findFilter(e);return t?new t:null}}]),e}(),G=function(){function e(t){Object(L["a"])(this,e),this.listProps=[],this.filterFactory=t||new S}return Object(D["a"])(e,[{key:"getFilterFactory",value:function(){return this.filterFactory}},{key:"run",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i,o,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:n=e.sent,a=Object(P["a"])(r),e.prev=4,a.s();case 6:if((i=a.n()).done){e.next=18;break}if(o=i.value,s=this.getFilterFactory().findFilter(o.name),s){e.next=11;break}throw new Error("filter not found");case 11:return l=new s,l.setPropertyMap(o),e.next=15,l.run(n);case 15:n=e.sent;case 16:e.next=6;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](4),a.e(e.t0);case 23:return e.prev=23,a.f(),e.finish(23);case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}}),e,this,[[4,20,23,26]])})));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}(),H=(r("4de4"),r("262e")),A=r("2caf"),X=function(){function e(){Object(L["a"])(this,e),this.name=""}return Object(D["a"])(e,[{key:"getPropertyMap",value:function(){return Object.assign({},this)}},{key:"setPropertyMap",value:function(e){return Object.assign(this,e)}}]),e}(),Y=function(e){Object(H["a"])(r,e);var t=Object(A["a"])(r);function r(){var e;return Object(L["a"])(this,r),e=t.apply(this,arguments),e.name="contrast",e.level=100,e}return Object(D["a"])(r,[{key:"run",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.getContext("2d"),null!==r){e.next=3;break}throw new Error("unable to create canvas context");case 3:return n=r.filter,r.filter="contrast(".concat(.01*this.level,")"),r.drawImage(t,0,0),r.filter=n,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(X),U=function(e){Object(H["a"])(r,e);var t=Object(A["a"])(r);function r(){var e;return Object(L["a"])(this,r),e=t.apply(this,arguments),e.name="resize",e.resizeToX=0,e.resizeToY=0,e}return Object(D["a"])(r,[{key:"run",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,s,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=this.resizeToX,n=this.resizeToY,a=r/t.width,i=n/t.height,o=n,s=r,0!==r||0!==n){e.next=10;break}return e.abrupt("return",t);case 10:0===r?s=i*t.width:0===n&&(o=a*t.height);case 11:if(l=new OffscreenCanvas(s,o),u=l.getContext("2d"),null!==u){e.next=15;break}throw new Error("unable to create canvas context");case 15:return u.drawImage(t,0,0,t.width,t.height,0,0,s,o),e.abrupt("return",l);case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(X),Z=function(e){Object(H["a"])(r,e);var t=Object(A["a"])(r);function r(){var e;return Object(L["a"])(this,r),e=t.apply(this,arguments),e.name="convert",e.supportFormat={webp:"image/webp",gif:"image/gif",png:"image/png",jpg:"image/jpeg"},e.targetFormat="jpg",e}return Object(D["a"])(r,[{key:"run",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(X),J=function(e){Object(H["a"])(r,e);var t=Object(A["a"])(r);function r(){var e;return Object(L["a"])(this,r),e=t.apply(this,arguments),e.name="grayscale",e.level=100,e}return Object(D["a"])(r,[{key:"run",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.getContext("2d"),null!==r){e.next=3;break}throw new Error("unable to create canvas context");case 3:return n=r.filter,r.filter="grayscale(".concat(.01*this.level,")"),r.drawImage(t,0,0),r.filter=n,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(X),q=function(e){Object(H["a"])(r,e);var t=Object(A["a"])(r);function r(){var e;return Object(L["a"])(this,r),e=t.apply(this,arguments),e.name="opacity",e.level=0,e}return Object(D["a"])(r,[{key:"run",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.getContext("2d"),null!==r){e.next=3;break}throw new Error("unable to create canvas context");case 3:return n=r.filter,r.filter="opacity(".concat(.01*this.level,")"),r.drawImage(t,0,0),r.filter=n,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(X),K=function(e){Object(H["a"])(r,e);var t=Object(A["a"])(r);function r(){var e;return Object(L["a"])(this,r),e=t.apply(this,arguments),e.name="saturate",e.level=100,e}return Object(D["a"])(r,[{key:"run",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.getContext("2d"),null!==r){e.next=3;break}throw new Error("unable to create canvas context");case 3:return n=r.filter,r.filter="saturate(".concat(.01*this.level,")"),r.drawImage(t,0,0),r.filter=n,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(X),Q=function(e){Object(H["a"])(r,e);var t=Object(A["a"])(r);function r(){var e;return Object(L["a"])(this,r),e=t.apply(this,arguments),e.name="blur",e.level=0,e}return Object(D["a"])(r,[{key:"run",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.getContext("2d"),null!==r){e.next=3;break}throw new Error("unable to create canvas context");case 3:return n=r.filter,r.filter="blur(".concat(this.level,"px)"),r.drawImage(t,0,0),r.filter=n,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(X);(function(e){e[e["TOP_LEFT"]=0]="TOP_LEFT",e[e["TOP_CENTER"]=1]="TOP_CENTER",e[e["TOP_RIGHT"]=2]="TOP_RIGHT",e[e["CENTER_LEFT"]=3]="CENTER_LEFT",e[e["CENTER_CENTER"]=4]="CENTER_CENTER",e[e["CENTER_RIGHT"]=5]="CENTER_RIGHT",e[e["BOTTOM_LEFT"]=6]="BOTTOM_LEFT",e[e["BOTTOM_CENTER"]=7]="BOTTOM_CENTER",e[e["BOTTOM_RIGHT"]=8]="BOTTOM_RIGHT",e[e["MOSAIC_FIT"]=9]="MOSAIC_FIT"})(B||(B={}));var V,W,ee=function(e){Object(H["a"])(r,e);var t=Object(A["a"])(r);function r(){var e;return Object(L["a"])(this,r),e=t.apply(this,arguments),e.name="overlay",e.position=0,e.margin=0,e}return Object(D["a"])(r,[{key:"run",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,i,o,s,l,u,c,p,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.image){e.next=2;break}return e.abrupt("return",t);case 2:if(r=t.getContext("2d"),null!==r){e.next=5;break}throw new Error("unable to create canvas context");case 5:return e.next=7,N(this.image);case 7:n=e.sent,a=this.margin,e.t0=this.position,e.next=e.t0===B.TOP_LEFT?12:e.t0===B.TOP_CENTER?14:e.t0===B.TOP_RIGHT?16:e.t0===B.CENTER_LEFT?18:e.t0===B.CENTER_CENTER?20:e.t0===B.CENTER_RIGHT?22:e.t0===B.BOTTOM_LEFT?24:e.t0===B.BOTTOM_CENTER?26:e.t0===B.BOTTOM_RIGHT?28:e.t0===B.MOSAIC_FIT?30:36;break;case 12:return r.drawImage(n,a,a),e.abrupt("break",36);case 14:return r.drawImage(n,(t.width-n.width)/2,a),e.abrupt("break",36);case 16:return r.drawImage(n,t.width-n.width-a,a),e.abrupt("break",36);case 18:return r.drawImage(n,a,(t.height-n.height)/2),e.abrupt("break",36);case 20:return r.drawImage(n,(t.width-n.width)/2,(t.height-n.height)/2),e.abrupt("break",36);case 22:return r.drawImage(n,t.width-n.width-a,(t.height-n.height)/2),e.abrupt("break",36);case 24:return r.drawImage(n,a,t.height-n.height-a),e.abrupt("break",36);case 26:return r.drawImage(n,(t.width-n.width)/2,t.height-n.height-a),e.abrupt("break",36);case 28:return r.drawImage(n,t.width-n.width-a,t.height-n.height-a),e.abrupt("break",36);case 30:for(i=Math.floor((t.width-a)/(n.width+a)),o=Math.floor((t.height-a)/(n.height+a)),s=(t.width-n.width*i)/(i+1),l=(t.height-n.height*o)/(o+1),u=0;u<i;u++)for(c=0;c<o;c++)p=s+u*(s+n.width),f=l+c*(l+n.height),r.drawImage(n,p,f);return e.abrupt("break",36);case 36:return e.abrupt("return",t);case 37:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(X);(function(e){e[e["TOP_LEFT"]=0]="TOP_LEFT",e[e["TOP_CENTER"]=1]="TOP_CENTER",e[e["TOP_RIGHT"]=2]="TOP_RIGHT",e[e["MIDDLE_LEFT"]=3]="MIDDLE_LEFT",e[e["MIDDLE_CENTER"]=4]="MIDDLE_CENTER",e[e["MIDDLE_RIGHT"]=5]="MIDDLE_RIGHT",e[e["BOTTOM_LEFT"]=6]="BOTTOM_LEFT",e[e["BOTTOM_CENTER"]=7]="BOTTOM_CENTER",e[e["BOTTOM_RIGHT"]=8]="BOTTOM_RIGHT"})(V||(V={})),function(e){e[e["SIZES"]=0]="SIZES",e[e["RATIO"]=1]="RATIO"}(W||(W={}));var te=function(e){Object(H["a"])(r,e);var t=Object(A["a"])(r);function r(){var e;return Object(L["a"])(this,r),e=t.apply(this,arguments),e.name="crop",e.position=0,e.width=1,e.height=1,e.mode=W.SIZES,e}return Object(D["a"])(r,[{key:"cropByRatio",value:function(e,t,r,n){var a=e.canvas.width,i=e.canvas.height,o=Math.min(a/t,i/r),s=t*o,l=r*o;return this.cropBySize(e,s,l,n)}},{key:"cropBySize",value:function(e,t,r,n){var a=new OffscreenCanvas(t,r),i=e.canvas,o=a.getContext("2d");if(null===o)throw new Error("unable to create canvas context");var s=0,l=0,u=Math.max((i.width-t)/2,0),c=Math.max((t-i.width)/2,0),p=Math.max(i.width-t,0),f=Math.max(t-i.width,0),d=0,h=0,b=Math.max((i.height-r)/2,0),m=Math.max((r-i.height)/2,0),g=Math.max(i.height-r,0),v=Math.max(r-i.height,0),w=Math.min(i.width,t),O=Math.min(i.height,r),x=w,_=O;switch(this.position){case V.TOP_LEFT:o.drawImage(i,s,d,w,O,l,h,x,_);break;case V.TOP_CENTER:o.drawImage(i,u,d,w,O,c,h,x,_);break;case V.TOP_RIGHT:o.drawImage(i,p,d,w,O,f,h,x,_);break;case V.MIDDLE_LEFT:o.drawImage(i,s,b,w,O,l,m,x,_);break;case V.MIDDLE_CENTER:o.drawImage(i,u,b,w,O,c,m,x,_);break;case V.MIDDLE_RIGHT:o.drawImage(i,p,b,w,O,f,m,x,_);break;case V.BOTTOM_LEFT:o.drawImage(i,s,g,w,O,l,v,x,_);break;case V.BOTTOM_CENTER:o.drawImage(i,u,g,w,O,c,v,x,_);break;case V.BOTTOM_RIGHT:o.drawImage(i,p,g,w,O,f,v,x,_);break}return o}},{key:"run",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.getContext("2d"),null!==r){e.next=3;break}throw new Error("unable to create canvas context");case 3:e.t0=this.mode,e.next=e.t0===W.RATIO?6:e.t0===W.SIZES?7:8;break;case 6:return e.abrupt("return",this.cropByRatio(r,this.width,this.height,this.position).canvas);case 7:return e.abrupt("return",this.cropBySize(r,this.width,this.height,this.position).canvas);case 8:throw new Error("unsupport mode");case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(X),re=[Y,U,Z,J,q,K,Q,ee,te],ne=re,ae=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault()}}},[r("label",{attrs:{for:"input-live"}},[e._v("Новая ширина (X) в пикселях:")]),r("b-form-input",{attrs:{type:"number",min:"0"},model:{value:e.settings.resizeToX,callback:function(t){e.$set(e.settings,"resizeToX",t)},expression:"settings.resizeToX"}}),r("label",{attrs:{for:"input-live"}},[e._v("Новая высота (Y) в пикселях:")]),r("b-form-input",{attrs:{type:"number",min:"0"},model:{value:e.settings.resizeToY,callback:function(t){e.$set(e.settings,"resizeToY",t)},expression:"settings.resizeToY"}})],1)},ie=[],oe=a["default"].extend({props:["settings"]}),se=oe,le=Object(g["a"])(se,ae,ie,!1,null,null,null),ue=le.exports,ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault()}}},[r("label",{attrs:{for:"range-1"}},[e._v("Контрастность: "+e._s(e.settings.level)+" %")]),r("b-form-input",{attrs:{id:"range-1",type:"range",min:"0",max:"200"},model:{value:e.settings.level,callback:function(t){e.$set(e.settings,"level",t)},expression:"settings.level"}})],1)},pe=[],fe=a["default"].extend({props:["settings"]}),de=fe,he=Object(g["a"])(de,ce,pe,!1,null,null,null),be=he.exports,me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault()}}},[r("label",{attrs:{for:"range-1"}},[e._v("Конвертировать в формат:")]),r("b-form-select",{staticClass:"mb-3",attrs:{options:e.settings.supportFormat},model:{value:e.settings.targetFormat,callback:function(t){e.$set(e.settings,"targetFormat",t)},expression:"settings.targetFormat"}})],1)},ge=[],ve=a["default"].extend({props:["settings"]}),we=ve,Oe=Object(g["a"])(we,me,ge,!1,null,null,null),xe=Oe.exports,_e=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault()}}},[r("label",{attrs:{for:"range-1"}},[e._v("Обесцвечивание: "+e._s(e.settings.level)+" %")]),r("b-form-input",{attrs:{id:"range-1",type:"range",min:"0",max:"100"},model:{value:e.settings.level,callback:function(t){e.$set(e.settings,"level",t)},expression:"settings.level"}})],1)},Te=[],ye=a["default"].extend({props:["settings"]}),ke=ye,je=Object(g["a"])(ke,_e,Te,!1,null,null,null),Ce=je.exports,Ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault()}}},[r("label",{attrs:{for:"range-1"}},[e._v("Прозрачности: "+e._s(e.settings.level)+" %")]),r("b-form-input",{attrs:{id:"range-1",type:"range",min:"0",max:"100"},model:{value:e.settings.level,callback:function(t){e.$set(e.settings,"level",t)},expression:"settings.level"}})],1)},Re=[],Fe=a["default"].extend({props:["settings"]}),Ie=Fe,Me=Object(g["a"])(Ie,Ee,Re,!1,null,null,null),$e=Me.exports,Pe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault()}}},[r("label",{attrs:{for:"range-1"}},[e._v("Насыщенность: "+e._s(e.settings.level)+" %")]),r("b-form-input",{attrs:{id:"range-1",type:"range",min:"0",max:"200"},model:{value:e.settings.level,callback:function(t){e.$set(e.settings,"level",t)},expression:"settings.level"}})],1)},Le=[],De=a["default"].extend({props:["settings"]}),Ne=De,ze=Object(g["a"])(Ne,Pe,Le,!1,null,null,null),Be=ze.exports,Se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault()}}},[r("label",{attrs:{for:"range-1"}},[e._v("Размытие: "+e._s(e.settings.level)+" px")]),r("b-form-input",{attrs:{id:"range-1",type:"range",min:"0",max:"100",step:"0.1"},model:{value:e.settings.level,callback:function(t){e.$set(e.settings,"level",t)},expression:"settings.level"}})],1)},Ge=[],He=a["default"].extend({props:["settings"]}),Ae=He,Xe=Object(g["a"])(Ae,Se,Ge,!1,null,null,null),Ye=Xe.exports,Ue=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault()}}},[r("label",{attrs:{for:"range-1"}}),r("b-form-file",{attrs:{state:Boolean(e.settings.image),placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:e.settings.image,callback:function(t){e.$set(e.settings,"image",t)},expression:"settings.image"}}),r("b-form-select",{staticClass:"mt-3",attrs:{options:e.supportPositions,size:"sm"},model:{value:e.settings.position,callback:function(t){e.$set(e.settings,"position",t)},expression:"settings.position"}}),e._v(" margin px"),r("b-form-input",{attrs:{id:"range-1",type:"number",step:"1"},model:{value:e.settings.margin,callback:function(t){e.$set(e.settings,"margin",t)},expression:"settings.margin"}})],1)},Ze=[],Je=(r("a9e3"),r("4fad"),r("3835")),qe=a["default"].extend({props:["settings"],data:function(){return{supportPositions:Object.entries(B).filter((function(e){var t=Object(Je["a"])(e,1),r=t[0];return isNaN(Number(r))})).map((function(e){var t=Object(Je["a"])(e,2),r=t[0],n=t[1];return{text:r,value:n}}))}}}),Ke=qe,Qe=Object(g["a"])(Ke,Ue,Ze,!1,null,null,null),Ve=Qe.exports,We=r("21a6"),et=r.n(We),tt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form",{on:{submit:function(e){e.stopPropagation(),e.preventDefault()}}},[r("b-form-select",{staticClass:"mt-3",attrs:{options:e.supportModes,size:"sm"},model:{value:e.settings.mode,callback:function(t){e.$set(e.settings,"mode",t)},expression:"settings.mode"}}),r("b-form-select",{staticClass:"mt-3",attrs:{options:e.supportPositions,size:"sm"},model:{value:e.settings.position,callback:function(t){e.$set(e.settings,"position",t)},expression:"settings.position"}}),e._v(" X:"),r("b-form-input",{attrs:{id:"range-1",type:"number",step:"1"},model:{value:e.settings.width,callback:function(t){e.$set(e.settings,"width",t)},expression:"settings.width"}}),e._v(" Y:"),r("b-form-input",{attrs:{id:"range-1",type:"number",step:"1"},model:{value:e.settings.height,callback:function(t){e.$set(e.settings,"height",t)},expression:"settings.height"}})],1)},rt=[],nt=a["default"].extend({props:["settings"],data:function(){return{supportPositions:Object.entries(V).filter((function(e){var t=Object(Je["a"])(e,1),r=t[0];return isNaN(Number(r))})).map((function(e){var t=Object(Je["a"])(e,2),r=t[0],n=t[1];return{text:r,value:n}})),supportModes:Object.entries(W).filter((function(e){var t=Object(Je["a"])(e,1),r=t[0];return isNaN(Number(r))})).map((function(e){var t=Object(Je["a"])(e,2),r=t[0],n=t[1];return{text:r,value:n}}))}}}),at=nt,it=Object(g["a"])(at,tt,rt,!1,null,null,null),ot=it.exports;a["default"].config.productionTip=!1,a["default"].use($["a"]),a["default"].use(i["a"]),a["default"].use(o["a"]),a["default"].use(s["a"]),a["default"].component("ResizeFilter",ue),a["default"].component("ContrastFilter",be),a["default"].component("ConvertFilter",xe),a["default"].component("GrayscaleFilter",Ce),a["default"].component("OpacityFilter",$e),a["default"].component("SaturateFilter",Be),a["default"].component("BlurFilter",Ye),a["default"].component("OverlayFilter",Ve),a["default"].component("CropFilter",ot);var st=new G,lt="en";ne.map((function(e){st.getFilterFactory().registerFilter(e)}));var ut=new $["a"]({locale:navigator.language.substr(0,2).toLowerCase()}),ct=new i["a"].Store({state:function(){return{user:{lang:lt},registeredFilters:st.getFilterFactory().getFilterCollection().map((function(e){return(new e).name})),filterMaps:[],fileList:[],showFileIndex:null}},mutations:{setlang:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt;e.user.lang=t,ut.locale=t},removeFilter:function(e,t){e.filterMaps.splice(t,1)},setFilter:function(e,t){e.filterMaps.push(t)},setFile:function(e,t){e.fileList.push(t)},deleteFile:function(e,t){return void 0!==e.fileList[t]&&(e.fileList.splice(t,1),0===e.fileList.length?this.commit("showFile",null):t>=e.fileList.length&&this.commit("showFile",t-1),!0)},showFile:function(e,t){e.showFileIndex=t}},actions:{initFilter:function(e,t){var r=st.getFilterFactory().findFilter(t);if(!r)return!1;e.commit("setFilter",(new r).getPropertyMap())},runFilterProcessor:function(e){return st.run(e.getters.fileList,e.getters.filterMaps)},runFilterProcessorForOne:function(e,t){return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=t.index,a=t.ignoreFilter,i=void 0!==a&&a,o=e.getters.fileList[n],o){r.next=4;break}return r.abrupt("return",null);case 4:return r.next=6,st.run(o,i?[]:e.getters.filterMaps);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r)})))()},downloadImages:function(e){var t=arguments;return Object(n["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=t.length>1&&void 0!==t[1]?t[1]:"common","common"!==a){r.next=5;break}return r.next=4,Promise.all(e.getters.fileList.map(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,st.run(r,e.getters.filterMaps);case 2:return n=t.sent,t.next=5,n.convertToBlob({type:"image/jpeg",quality:.95});case 5:a=t.sent,et.a.saveAs(a,"file.jpg");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:return r.abrupt("return",!0);case 5:case"end":return r.stop()}}),r)})))()}},getters:{filterMaps:function(e){return e.filterMaps},fileList:function(e){return e.fileList}}});new a["default"]({i18n:ut,store:ct,render:function(e){return e(M)}}).$mount("#app"),ct.commit("setlang",navigator.language.substr(0,2).toLowerCase())},e1ed:function(e,t,r){"use strict";var n=r("22b9"),a=r.n(n);t["default"]=a.a},ecae:function(e,t,r){"use strict";var n=r("1224"),a=r.n(n);t["default"]=a.a}});
//# sourceMappingURL=app.a7fc6246.js.map